<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/.gitignore">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/.gitignore" />
              <option name="updatedContent" value="# Compiled class files&#10;*.class&#10;target/&#10;&#10;# Log files&#10;*.log&#10;&#10;# IntelliJ IDEA&#10;.idea/&#10;*.iml&#10;*.iws&#10;*.ipr&#10;out/&#10;&#10;# Eclipse&#10;.classpath&#10;.project&#10;.settings/&#10;&#10;# NetBeans&#10;nbproject/&#10;nbbuild/&#10;dist/&#10;nbdist/&#10;&#10;# VS Code&#10;.vscode/&#10;&#10;# Maven&#10;pom.xml.tag&#10;pom.xml.releaseBackup&#10;pom.xml.versionsBackup&#10;pom.xml.next&#10;release.properties&#10;dependency-reduced-pom.xml&#10;&#10;# Sensitive configuration files&#10;src/main/resources/application.properties&#10;&#10;# CSV data files (optional - uncomment if needed)&#10;# *.csv&#10;&#10;# OS files&#10;.DS_Store&#10;Thumbs.db&#10;desktop.ini&#10;&#10;# Temporary files&#10;*.tmp&#10;*.bak&#10;*.swp&#10;*~&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/README.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/README.md" />
              <option name="updatedContent" value="# Load CSV to Database Staging&#10;&#10;Chương trình Java để load dữ liệu từ file CSV vào bảng staging MySQL.&#10;&#10;##  Quick Start&#10;&#10;### 1. Cài đặt Dependencies&#10;```bash&#10;mvn clean install&#10;```&#10;&#10;### 2. Cấu hình Database&#10;Chỉnh sửa `src/main/resources/application.properties`:&#10;```properties&#10;db.url=jdbc:mysql://localhost:3306/db_staging?useUnicode=true&amp;characterEncoding=UTF-8&#10;db.user=root&#10;db.pass=your_password&#10;csv.file=src/main/java/org/example/fix_products.csv&#10;```&#10;&#10;### 3. Tạo Database&#10;```sql&#10;CREATE DATABASE db_staging;&#10;USE db_staging;&#10;&#10;CREATE TABLE stg_phones (&#10;    id INT AUTO_INCREMENT PRIMARY KEY,&#10;    name VARCHAR(255),&#10;    screenSize VARCHAR(50),&#10;    screenTechnology VARCHAR(100),&#10;    screenResolution VARCHAR(100),&#10;    camera VARCHAR(255),&#10;    chipset VARCHAR(100),&#10;    ram VARCHAR(50),&#10;    storage VARCHAR(50),&#10;    battery INT,&#10;    version VARCHAR(50),&#10;    color VARCHAR(50),&#10;    price DECIMAL(15,2),&#10;    oldPrice DECIMAL(15,2),&#10;    link VARCHAR(500),&#10;    rating FLOAT,&#10;    numReviews INT,&#10;    nfc VARCHAR(10),&#10;    releaseDate VARCHAR(50),&#10;    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP&#10;);&#10;```&#10;&#10;### 4. Chạy chương trình&#10;```bash&#10;# Trong IntelliJ IDEA: Run LoadCSVToStaging.main()&#10;# Hoặc dùng Maven:&#10;mvn exec:java -Dexec.mainClass=&quot;org.example.LoadCSVToStaging&quot;&#10;```&#10;&#10;##  Yêu cầu&#10;- Java 17+&#10;- Maven 3.6+&#10;- MySQL 8.0+&#10;&#10;##  Tài liệu chi tiết&#10;Xem file [HUONG_DAN_SU_DUNG.md](./HUONG_DAN_SU_DUNG.md) để biết hướng dẫn đầy đủ.&#10;&#10;## ✨ Tính năng&#10;- ✅ Load CSV vào MySQL tự động&#10;- ✅ Xử lý lỗi từng dòng riêng biệt&#10;- ✅ Tự động cắt ngắn dữ liệu dài&#10;- ✅ Hỗ trợ NULL values&#10;- ✅ Cấu hình qua properties file&#10;- ✅ Báo cáo chi tiết kết quả&#10;&#10;##  Cấu trúc CSV&#10;File CSV cần có 18 cột theo thứ tự:&#10;```&#10;name,screenSize,screenTechnology,screenResolution,camera,chipset,ram,storage,battery,version,color,price,oldPrice,link,rating,numReviews,nfc,releaseDate&#10;```&#10;&#10;##  Xử lý lỗi&#10;Nếu gặp lỗi, xem file [HUONG_DAN_SU_DUNG.md](./HUONG_DAN_SU_DUNG.md) phần &quot;Xử lý lỗi thường gặp&quot;.&#10;&#10;---&#10;&#10;**Version:** 1.0.0  &#10;**Last Updated:** 2024-11-04&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/database_setup.sql">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/database_setup.sql" />
              <option name="updatedContent" value="-- =====================================================&#10;-- Script: Tạo Database và Table cho Staging&#10;-- Project: Load CSV to Database Staging&#10;-- Date: 2024-11-04&#10;-- =====================================================&#10;&#10;-- 1. Tạo database nếu chưa tồn tại&#10;CREATE DATABASE IF NOT EXISTS db_staging &#10;CHARACTER SET utf8mb4 &#10;COLLATE utf8mb4_unicode_ci;&#10;&#10;-- 2. Sử dụng database&#10;USE db_staging;&#10;&#10;-- 3. Xóa bảng cũ nếu tồn tại (cẩn thận với lệnh này!)&#10;-- DROP TABLE IF EXISTS stg_phones;&#10;&#10;-- 4. Tạo bảng stg_phones&#10;CREATE TABLE IF NOT EXISTS stg_phones (&#10;    id INT AUTO_INCREMENT PRIMARY KEY COMMENT 'ID tự động tăng',&#10;    &#10;    -- Thông tin cơ bản&#10;    name VARCHAR(255) COMMENT 'Tên sản phẩm',&#10;    &#10;    -- Thông số màn hình&#10;    screenSize VARCHAR(50) COMMENT 'Kích thước màn hình',&#10;    screenTechnology VARCHAR(100) COMMENT 'Công nghệ màn hình (OLED, AMOLED, LCD...)',&#10;    screenResolution VARCHAR(100) COMMENT 'Độ phân giải màn hình',&#10;    &#10;    -- Thông số kỹ thuật&#10;    camera VARCHAR(255) COMMENT 'Thông số camera',&#10;    chipset VARCHAR(100) COMMENT 'Vi xử lý',&#10;    ram VARCHAR(50) COMMENT 'Dung lượng RAM',&#10;    storage VARCHAR(50) COMMENT 'Bộ nhớ trong',&#10;    battery INT COMMENT 'Dung lượng pin (mAh)',&#10;    &#10;    -- Phiên bản và màu sắc&#10;    version VARCHAR(50) COMMENT 'Phiên bản hệ điều hành',&#10;    color VARCHAR(50) COMMENT 'Màu sắc',&#10;    &#10;    -- Giá cả&#10;    price DECIMAL(15,2) COMMENT 'Giá bán hiện tại (VNĐ)',&#10;    oldPrice DECIMAL(15,2) COMMENT 'Giá cũ (VNĐ)',&#10;    &#10;    -- Thông tin bổ sung&#10;    link VARCHAR(500) COMMENT 'Link sản phẩm',&#10;    rating FLOAT COMMENT 'Đánh giá trung bình (0-5 sao)',&#10;    numReviews INT COMMENT 'Số lượt đánh giá',&#10;    nfc VARCHAR(10) COMMENT 'Hỗ trợ NFC (Yes/No)',&#10;    releaseDate VARCHAR(50) COMMENT 'Ngày ra mắt',&#10;    &#10;    -- Metadata&#10;    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'Thời gian insert vào DB',&#10;    &#10;    -- Indexes để tăng tốc query&#10;    INDEX idx_name (name),&#10;    INDEX idx_price (price),&#10;    INDEX idx_created_at (created_at)&#10;    &#10;) ENGINE=InnoDB &#10;  DEFAULT CHARSET=utf8mb4 &#10;  COLLATE=utf8mb4_unicode_ci&#10;  COMMENT='Bảng staging cho dữ liệu điện thoại';&#10;&#10;-- 5. Kiểm tra bảng đã tạo thành công&#10;SHOW CREATE TABLE stg_phones;&#10;&#10;-- 6. Xem cấu trúc bảng&#10;DESCRIBE stg_phones;&#10;&#10;-- =====================================================&#10;-- Một số câu query hữu ích&#10;-- =====================================================&#10;&#10;-- Đếm số bản ghi trong bảng&#10;-- SELECT COUNT(*) as total_records FROM stg_phones;&#10;&#10;-- Xem 10 bản ghi đầu tiên&#10;-- SELECT * FROM stg_phones LIMIT 10;&#10;&#10;-- Xem 10 bản ghi mới nhất&#10;-- SELECT * FROM stg_phones ORDER BY created_at DESC LIMIT 10;&#10;&#10;-- Xem sản phẩm theo giá giảm dần&#10;-- SELECT name, price, rating FROM stg_phones ORDER BY price DESC LIMIT 20;&#10;&#10;-- Xem sản phẩm có rating cao nhất&#10;-- SELECT name, price, rating, numReviews &#10;-- FROM stg_phones &#10;-- WHERE rating IS NOT NULL &#10;-- ORDER BY rating DESC, numReviews DESC &#10;-- LIMIT 10;&#10;&#10;-- Xóa tất cả dữ liệu trong bảng (giữ nguyên cấu trúc)&#10;-- TRUNCATE TABLE stg_phones;&#10;&#10;-- Xóa dữ liệu cũ hơn 30 ngày&#10;-- DELETE FROM stg_phones WHERE created_at &lt; DATE_SUB(NOW(), INTERVAL 30 DAY);&#10;&#10;-- =====================================================&#10;-- Backup và Restore&#10;-- =====================================================&#10;&#10;-- Backup bảng&#10;-- mysqldump -u root -p db_staging stg_phones &gt; stg_phones_backup.sql&#10;&#10;-- Restore bảng&#10;-- mysql -u root -p db_staging &lt; stg_phones_backup.sql&#10;&#10;-- =====================================================&#10;-- DONE!&#10;-- =====================================================&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/resources/application.properties.example">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/resources/application.properties.example" />
              <option name="updatedContent" value="# Database Configuration&#10;# Thay đổi các giá trị dưới đây theo môi trường của bạn&#10;db.url=jdbc:mysql://localhost:3306/db_staging?useUnicode=true&amp;characterEncoding=UTF-8&#10;db.user=root&#10;db.pass=&#10;&#10;# CSV File Path&#10;# Có thể dùng đường dẫn tương đối hoặc tuyệt đối&#10;csv.file=src/main/java/org/example/fix_products.csv&#10;&#10;# Ví dụ đường dẫn tuyệt đối:&#10;# csv.file=C:/data/fix_products.csv&#10;# csv.file=D:/projects/data/fix_products.csv&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>